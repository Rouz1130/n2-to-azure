/*! ExxonMobil 2015-12-29 14:12:12 */
var Clouds=function(){function a(a,b){for(var c={None:0,Few:.7,Normal:.7,Lot:1,Special:1},d={None:0,Few:4,Normal:4,Lot:4,Special:2},e={None:[0,0],Few:[180,30],Normal:[180,30],Lot:[250,20],Special:[60,5]},f=0;f<k.length;f++)k[f]==b&&(p[a].mode=b,p[a].weight=c[b],p[a].clouds=d[b],p[a].sizes=e[b],i=p[a].file);"Lot"===b||"Special"===b?(h.addClass("lot"),j(".background-fade",h).fadeIn(1e3)):h.hasClass("lot")&&(h.removeClass("lot"),j(".background-fade",h).fadeOut(1e3))}function b(a,b){return 1===a?Math.floor(-300+200*Math.random()):2===a?Math.floor(140*Math.random()):Math.floor(200+50*Math.random())}function c(a,b){return 1===a?Math.floor(0-30*Math.random()):2===a?Math.floor(-20-20*Math.random()):Math.floor(0-40*Math.random())}function d(a,d,e,f,h){var k=e?1:2+2*Math.random(),l=j("<div>",{"class":"cloud-base"}),o=b(h,e),p=c(h,e),q=d[0]-Math.random()*d[1];e&&(o=-260,p=40,q=100),e||"Special"!==f||(o=Math.floor(20+50*Math.random()),p=Math.floor(-20-20*Math.random()),q=200+Math.random()*d[0],j(".no-flexboxlegacy").length>0&&(o=20+150*Math.random()));var r="translateX( "+o+"px ) translateY( "+p+"px ) translateZ( "+q+"px )";l.css("webkitTransform",r),l.css("MozTransform",r),l.css("oTransform",r),l.css("transform",r),g.append(l);var s=.52*Math.random();l.data={x:o,y:p,z:q,speed:s},n.push(l);for(var t=0;k>t;t++){for(var v=j("<img>",{"class":"cloud-layer"}),w=Math.random(),x=i,y=0;y<u.length;y++)w>=u[y].min&&w<=u[y].max&&!function(a){a.addEventListener("load",function(){a.style.opacity=.8})}(v.get(0));v.css("opacity",0),v.attr("src",x),o=300-650*Math.random(),p=10-200*Math.random(),q=100-10*Math.random();var z=360*Math.random(),A=e?1.8:.5;j(".no-flexboxlegacy").length>0&&(A=e?3.8:2.5),o*=.2,p*=.2;var B="Lot"===f||"Special"===f?.009:.015,C=B+.03*Math.random();v.data={x:o,y:p,z:q,a:z,s:A,speedA:C,animate:e?!1:!0},r="translateX( "+o+"px ) translateY( "+p+"px ) translateZ( "+q+"px ) rotateZ( "+z+"deg ) scale( "+A+" )",v.css("webkitTransform",r),v.css("MozTransform",r),v.css("oTransform",r),v.css("transform",r),l.append(v),m.push(v)}return l}function e(){g.empty(),o=[],u=[];for(var a="none",b=0,c=0,e=[0,0],f=0;f<p.length;f++)p[f].weight>0&&(b+=p[f].weight,a=p[f].mode),p[f].clouds>0&&(c+=p[f].clouds),p[f].sizes&&p[f].sizes[0]>0&&(e[0]+=p[f].sizes[0],e[1]+=p[f].sizes[1]);for(var h=0,i=0;i<p.length;i++)if(p[i].weight>0){var j=p[i].weight/b;u.push({src:p[i].file,min:h,max:h+j}),h+=j}for(i=0;c>i;i++){var k=0===i?!0:!1;o.push(d(c,e,k,a,i))}}function f(){if(t){for(var a=0;a<m.length;a++){var b=m[a];b.data.animate?b.data.a+=b.data.speedA:b.data.a+=1e-5;var c="translateX( "+b.data.x+"px ) translateY( "+b.data.y+"px ) translateZ( "+b.data.z+"px ) rotateY( "+-s+"deg ) rotateX( "+-r+"deg ) rotateZ( "+b.data.a+"deg ) scale( "+b.data.s+")";b.css("webkitTransform",c),b.css("MozTransform",c),b.css("oTransform",c),b.css("transform",c)}requestAnimationFrame(f)}}var g,h,i,j,k=["None","Few","Normal","Lot","Special"],l=[[800],[801],[802,803],[701,711,721,741,761,762,804],[1]],m=[],n=[],o=[],p=[],q=400,r=0,s=0,t=!1,u=[],v=function(a){for(var b=0;b<l.length;b++)for(var c=l[b],d=0;d<c.length;d++)if(c[d]==a)return b;return 0},w=function(b,c,d){j=b,g=j(".weather .world"),h=j(".weather .viewport"),h.css("webkitPerspective",q),h.css("MozPerspective",q+"px"),h.css("oPerspective",q),h.css("perspective",q),p=[],p[0]={name:"white cloud",file:d+"cloud.png",opacity:1,weight:0,sizes:[0,0]},p[1]={name:"grey cloud",file:d+"cloud-grey.png",opacity:1,weight:0,sizes:[0,0]},p[2]={name:"night cloud",file:d+"cloud-night.png",opacity:1,weight:0,sizes:[0,0]};var i=v(c);"None"===k[i]?x():(a(0,k[i]),e(),t=!0,f())},x=function(){t=!1,h.hasClass("lot")&&(h.removeClass("lot"),j(".background-fade",h).hide()),g.children().length>0&&g.empty()},y=function(b,c,d){if(j(".weather").hasClass("weather-eve"))return void x();var g=v(b);if("None"===k[g])x();else{var h=d||0;a(h,k[g]),e(),c?t=!1:(t=!0,f())}"None"===k[g]||"Few"===k[g]?j(".weather .station-img.no-shadow").removeClass("show"):j(".weather .station-img.no-shadow").addClass("show")};return{init:w,name:"Clouds",stopAnimation:x,changeTo:y}}(),requestAnimationFrameId;!function(a){function b(b,e){e&&(e.postalCode||e.coordinates)&&a.get(d.apiUrl,e).done(function(a){c(a.time),Tribal.Weather.changeWeatherTo(a.style,a.value)})}function c(a){e.removeClass("weather-day weather-eve").addClass("night"===a?"weather-eve":"weather-day")}for(var d,e,f=0,g=["ms","moz","webkit","o"],h=0;h<g.length&&!window.requestAnimationFrame;++h)window.requestAnimationFrame=window[g[h]+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[g[h]+"CancelRequestAnimationFrame"];window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-f));return requestAnimationFrameId=window.setTimeout(function(){a(c+d)},d),f=c+d,requestAnimationFrameId},window.cancelAnimationFrame=function(a){clearTimeout(a)},a(function(){e=a(".weather[data-weather]"),0!==e.length&&(d=e.data("weather"),Tribal.Weather.init(a,d.imageBaseUrl),Tribal.Weather.changeWeatherTo(),Tribal.Weather.changeWeatherTo(d.style,d.value),d.apiUrl&&a.subscribe("xom.location-changed",b))})}(window.jQuery);var Rain=function(){var a,b,c,d=!1,e=[[300,301,310,500,520],[311,313,321,501,521],[302,312,314,502,503,504,511,522,531]],f=[{"class":" light",max:60,height:0},{"class":" light",max:60,height:0},{"class":" heavy",max:150,height:0}],g=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},h=function(a){for(var b=0;b<e.length;b++)for(var c=e[b],d=0;d<c.length;d++)if(c[d]==a)return b;return 0},j=function(d){for(2===d&&c.addBackgroundClass("dark-sky"),i=1;i<f[d].max;i++){var e=g(0,1950),h=g(-500,120),j=i%2===0?" angled":"",k=a("<div>",{"class":"drop"+f[d]["class"]+j,id:"drop"+i}),l=a("<span>");0===f[d].height?Math.floor(5+5*Math.random()):Math.floor(30+Math.random()*f[d].height);k.append(l),b.append(k),k.css("left",e),k.css("top",h)}},k=function(e,f,g){a=e,c=g,b=a("<div>",{"class":"rain-base"}),a("#viewport-wrapper").append(b);var i=h(f);j(i),d=!0},l=function(){d=!1},m=function(a){b.empty();var c=h(a);j(c)};return{init:k,name:"Rain",stopAnimation:l,changeTo:m}}(),Snow=function(){var a,b,c,d,e,f,g,h,i,j=[],k=[],l=!1,m=[[600],[615,620],[601,621],[611,612,616],[602,622],[906]],n=[{png:"snow",size:-1,modus:-1,speed:18,drift:10,max:100,intervalRadio:[]},{png:"snow",size:-1,modus:-1,speed:18,drift:10,max:100,intervalRadio:[]},{png:"snow",size:-1,modus:-1,speed:18,drift:10,max:100,intervalRadio:[]},{png:"snow",size:-1,modus:-1,speed:18,drift:10,max:100,intervalRadio:[]},{png:"snow",size:-1,modus:-1,speed:18,drift:10,max:100,intervalRadio:[]},{png:"snow",size:-1,modus:-1,speed:18,drift:10,max:100,intervalRadio:[]}],o=function(d){var j=a(".weather .viewport-wrapper");h=1950,i=j.height(),b=document.createElement("canvas"),b.width=h,b.height=i,b.className="snow-canvas",j.append(a(b)),c=b.getContext("2d"),e=new Image,e.src=d+"snowflake.png",f=new Image,f.src=d+"sleet.png",g=new Image,g.src=d+"hail.png"},p=function(a,b,d,e,g,h,i,j){var k,l=this,m=-10,n=0,o=g,p=j,q=0,r=("#"+Math.floor(16777215*Math.random()).toString(16),!1),s=!1,t=!1,u=Math.random()<.5?1:-1,v=.1+Math.random();l.init=function(){n=0,-1===i?i=h===f?1:.05+Math.floor(0+70*Math.random())/100:(i+=.15*Math.random(),v=.5+Math.random()),p.length>0&&(k=setTimeout(l.timeToChangeInterval,p[q]))},l.timeToChangeInterval=function(){0===q?(s=!0,q=1):(s=!1,t=!1,q=0,k=setTimeout(l.timeToChangeInterval,p[q]))},l.draw=function(){r||(c.save(),c.globalAlpha=v,c.drawImage(h,Math.round(d),Math.round(e),h.width*i,h.height*i),c.restore())},l.update=function(c){if(!r){if(!t){n+=a/5e3,d+=u*a*Math.cos(n)/40;var f=Math.floor(100*(Math.sin(n)/40+a/b))/100;e+=f}e>o&&(e=m,s&&(t=!0,k=setTimeout(l.timeToChangeInterval,p[q])))}},l.stop=function(a){r=!0,clearTimeout(k)},l.init()},q=function(){if(l){requestAnimationFrame(q),c.globalCompositeOperation="destination-out",c.fillRect(0,0,h,i),c.globalCompositeOperation="lighter";for(var a=j.length;a--;)j[a].draw(),j[a].update(a);for(a=k.length;a--;)k[a].draw(),k[a].update(a)}},r=function(a){for(var b=0,c=0;c<m.length;c++)for(var k=m[c],l=0;l<k.length;l++)if(k[l]==a){b=c;break}3===b||5===b?d.addBackgroundClass("grey-sky"):0===b&&d.addBackgroundClass("blue-sky");for(var o=0;o<n[b].max;o++){var q=Math.floor(20+Math.random()*h),r=10+Math.floor(Math.random()*i),s=2+Math.random()*n[b].speed,t=n[b].drift,u=e;switch(n[b].png){case"sleet":u=f;break;case"hail":s=Math.floor(12+Math.random()*n[b].speed),r=-1*Math.floor(600*Math.random())-5,u=g}if(-1!==n[b].modus){var v=o%n[b].modus;v===n[b].modus-1&&(u=f,s=8+10*Math.random(),t=1+1*Math.random())}j.push(new p(s,t,q,r,i,u,n[b].size,n[b].intervalRadio))}},s=function(b,c,e,f){a=b,d=e,o(f),l=!0,r(c),q()},t=function(){l=!1,cancelAnimationFrame(q);for(var a=0;a<j.length;a++)j[a].stop(a),j[a]=null;j=[],c.globalCompositeOperation="destination-in",c.fillRect(0,0,h,i)},u=function(a){t(),r(a),l=!0,q()};return{init:s,name:"Snow",animationIsRunning:l,stopAnimation:t,changeTo:u}}(),Tribal=window.Tribal||{};Tribal.Weather=function(){var a,b=[],c=[],d={Clouds:Clouds,Snow:Snow,Rain:Rain},e={},f="/",g=function(b,c){a=b,f=c;for(var g in d){d[g].name;e[g]=!1}},h=function(b,d){switch(c=[],"Snow"!=b||620!=d&&615!=d?"Snow"!=b||611!=d&&612!=d&&616!=d&&906!=d||(b="Rain",d=302):(b="Rain",d=300),b){case"Clear":case"Clouds":case"Atmosphere":j(),p()?o(d):l(d);break;case"Snow":j(),p()?o(d):m(d);break;case"Rain":case"Drizzle":j(),p()?o(d):k(d);break;case"Extreme":906===d?h("Snow",906):h("Clouds",804);break;default:h("Clouds",804)}var e=a(".weather .weather-animation");e.removeClass().addClass("weather-animation");for(var f=0;f<c.length;f++)e.addClass(c[f]);800===d&&e.addClass("Clear")},i=function(a){c.push(a)},j=function(a){for(var c=0;c<b.length;c++)d[b[c]].stopAnimation();b=[]},k=function(d){e[Rain.name]?Rain.changeTo(d):(Rain.init(a,d,Tribal.Weather),e[Rain.name]=!0);var f=300===Number(d)||301===Number(d)||310===Number(d)||500===Number(d)||520===Number(d)?0:1;n()||(f=2),Clouds.changeTo(1,!0,f),c.push(Clouds.name),c.push(Rain.name),b=[Clouds.name,Rain.name]},l=function(d){if(e[Clouds.name]){var g=n()?0:2;Clouds.changeTo(d,!1,g)}else Clouds.init(a,"None",f),e[Clouds.name]=!0;c.push(Clouds.name),b=[Clouds.name]},m=function(d){e[Snow.name]?Snow.changeTo(d):(Snow.init(a,d,Tribal.Weather,f),e[Snow.name]=!0);var g=n()?1:2;600===Number(d)||615===Number(d)||620===Number(d)?Clouds.changeTo(804,!0,g):Clouds.changeTo(1,!0,g),c.push(Clouds.name),c.push(Snow.name),b=[Clouds.name,Snow.name]},n=function(){return a(".weather").hasClass("weather-day")},o=function(b){var c=a(".weather .viewport-wrapper"),d=a(".viewport",c);switch(c.removeClass().addClass("ie"),d.removeClass(),b+""){case"800":d.addClass("clouds-clear"),c.addClass("do-show-shadow");break;case"801":d.addClass("clouds-few"),c.addClass("do-show-shadow");break;case"802":case"803":d.addClass("clouds-scattered");break;case"600":d.addClass("snow-light");break;case"601":case"621":d.addClass("snow-med");break;case"615":case"620":case"611":case"612":case"616":d.addClass("snow_sleet");break;case"602":case"622":d.addClass("snow-heavy");break;case"906":d.addClass("hail");break;case"302":case"312":case"314":case"502":case"503":case"504":case"511":case"522":case"531":d.addClass("rain-heavy");break;case"311":case"313":case"321":case"501":case"521":d.addClass("rain-med");break;case"300":case"301":case"310":case"500":case"520":d.addClass("rain-light");break;default:d.addClass("clouds-overcast")}},p=function(){return a(".no-cssanimations").length>0?!0:!1};return{init:g,addBackgroundClass:i,changeWeatherTo:h,baseImagePath:f}}();